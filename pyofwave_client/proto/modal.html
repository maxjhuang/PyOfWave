<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>PyOfWave modal controls</title>
	
	<script src="../src/api/jquery-1.5.1.js"></script>
	<script src="../src/api/jqueryUI/jquery-ui-1.8.14.custom.js"></script>
	<script src="../src/api/farbtastic.js"></script>
	<script>
		var $overlay = $('<div>').css({
				position: 'absolute', top: 0, left: 0, 
				width: window.innerWidth, height: window.innerHeight, 
				background: 'black', opacity: 0.1})

		function popover($el) {
			$el.hide() // Add overlay to increase modality and prevent clashes between views?
			return function(evtOrEl) {
				$el.fadeIn().click(function(evt) {evt.stopPropagation()})
					.position({of: evtOrEl, offset: "0 10", collision: "fit",
						my: 'top', at: 'bottom'})
				$overlay.fadeIn()
					.one('click', function(e) {
						e.stopPropagation()
						$(this).add($el).fadeOut()
					})
			}
		}
		$(function() {
			$('button').each(function() {
				var popup = popover($('#'+$(this).attr('data-for')))
				$(this).click(function(evt) {
					evt.stopPropagation()
					popup(this)
				})
			})

			$overlay.prependTo('body').hide()
			$('.farbtastic').each(function() {
				$(this).farbtastic($('[data-for='+$(this).attr('id')+']'))
			})
		})
	</script>
	<style>
		body {background: #ddd;font-family:sans-serif;}
		.modal {
			width: 225px;
			padding: 5px;
			border: 3px solid #f00;
			border-radius: 20px;
			background: white;
			box-shadow: 10px 10px 20px;
		}
		.modal.menu {list-style: none; overflow: hidden;}
		.modal.menu li {
			border-bottom: thin solid #666;
			cursor: default;
			width: 100%;
			margin: 0 -10px; width: 240px; /* span full row */
			padding-left: 5px;
		}
		.modal.menu li:hover {
			background: #bbb;
		}
	</style>
</head>
<body>
	<h1>Modal menus, prompts, colours, and contacts</h1>
	<p>In order to retrieve (or communicate) additional details on specific actions, modal controls will be used. For consistancy, menus would be grouped in with these modal controls. These modal controls would would have a rounded solid border to tie into the post style and seperate the modal from the background content. Positioned right under the related control, click outside the modal control to close it, in which way it behaves like an iPad UIPopOver. </p>
	<p>
		<button data-for="modal">Show Modal</button>
		<button data-for="menu">File</button>
		<button data-for="color" style="background-color: #f99">Text Color</button>
		<button>Spock</button>
	</p>
	<div class="modal" id="modal">
		This is a popover. This general style of control will:
		<ul>
			<li>Give additional actions. (menu)</li>
			<li>Request textual information whilst providing frequent values. (prompt)</li>
			<li>Shows contacts details. (cards)</li>
			<li>Requests colours. (Farbtastic)</li>
		</ul>
	</div>
	<ul class="modal menu" id="menu">
		<li>New</li>
		<li>Open...</li>
		<li>Open Recent &gt;</li>
		<li class="seperator"></li>
		<li>Save</li>
		<li>Save As</li>
		<li class="seperator"></li>
		<li>Print...</li>
		<li class="seperator"></li>
		<li>Close...</li>
	</ul>
	<div class="modal" id="color">
		<div class="farbtastic"></div>
		<p><button type="submit">OK</button><button>Cancel</button></p>
	</div>
</body>
</html>
